(include_subdirs qualified)

(library
 (name rl_core)
 (modules ai backend input)
 (libraries
  actors
  base
  components
  containers
  core_kernel
  core_kernel.pairing_heap
  dungeon
  entities
  events
  logs
  logs.fmt
  mapgen
  rl_utils
  state
  systems
  types)
 (preprocess
  (staged_pps
   ppx_compare
   ppx_deriving.enum
   ppx_deriving.eq
   ppx_deriving.ord
   ppx_deriving.show
   ppx_hash
   ppx_import
   ppx_inline_test
   ppx_sexp_conv
   ppx_yojson_conv)))

(env
 (dev
  (flags
   (:standard -warn-error -A -w -30))))

(library
 (name core_log)
 (modules core_log)
 (libraries base core_kernel containers logs))

(library
 (name turn_queue)
 (modules turn_queue)
 (libraries base core_kernel containers logs types core_log))

(library
 (name map_manager)
 (modules map_manager)
 (libraries
  actors
  base
  containers
  core_kernel
  entities
  logs
  mapgen
  turn_queue
  types))

(library
 (name types)
 (modules types)
 (libraries base core_kernel containers logs)
 (preprocess
  (staged_pps
   ppx_compare
   ppx_deriving.enum
   ppx_deriving.eq
   ppx_deriving.ord
   ppx_deriving.show
   ppx_hash
   ppx_import
   ppx_inline_test
   ppx_sexp_conv
   ppx_yojson_conv)))
